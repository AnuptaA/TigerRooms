(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,function(e,t,a){},,,,,,,function(e,t,a){e.exports=a.p+"static/media/upload-file-svgrepo-com.36402c62.svg"},function(e,t,a){e.exports=a(57)},,,,,,,,function(e,t,a){},function(e,t,a){var n={"./Whitman_1981_0.png":21,"./Whitman_1981_1.png":22,"./Whitman_1981_2.png":23,"./Whitman_1981_3.png":24,"./Whitman_1981_4.png":25,"./Whitman_Baker-E_0.png":26,"./Whitman_Baker-E_1.png":27,"./Whitman_Baker-E_2.png":28,"./Whitman_Baker-E_3.png":29,"./Whitman_Baker-E_4.png":30,"./Whitman_Baker-S_0.png":31,"./Whitman_Baker-S_1.png":32,"./Whitman_Baker-S_2.png":33,"./Whitman_Baker-S_3.png":34,"./Whitman_Baker-S_4.png":35,"./Whitman_Fisher_1.png":36,"./Whitman_Fisher_2.png":37,"./Whitman_Fisher_3.png":38,"./Whitman_Hargadon_2.png":39,"./Whitman_Hargadon_3.png":40,"./Whitman_Hargadon_4.png":41,"./Whitman_Lauritzen_0.png":42,"./Whitman_Lauritzen_1.png":43,"./Whitman_Lauritzen_2.png":44,"./Whitman_Lauritzen_3.png":45,"./Whitman_Lauritzen_4.png":46,"./Whitman_Murley-Pivirotto_3.png":47,"./Whitman_Murley-Pivirotto_4.png":48,"./Whitman_Wendell-B_2.png":49,"./Whitman_Wendell-B_3.png":50,"./Whitman_Wendell-B_4.png":51,"./Whitman_Wendell-C_2.png":52,"./Whitman_Wendell-C_3.png":53,"./Whitman_Wendell-C_4.png":54};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=20},function(e,t,a){e.exports=a.p+"static/media/Whitman_1981_0.bd6de58b.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_1981_1.7348b982.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_1981_2.ac83ff6d.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_1981_3.8470f931.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_1981_4.c7289fbf.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Baker-E_0.f34839ab.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Baker-E_1.6b586356.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Baker-E_2.1168a306.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Baker-E_3.5546b8b0.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Baker-E_4.63a97a38.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Baker-S_0.6c6e2b40.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Baker-S_1.9da22c11.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Baker-S_2.b6525830.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Baker-S_3.7e13f44b.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Baker-S_4.70bb9223.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Fisher_1.c74528c8.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Fisher_2.c1367742.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Fisher_3.d90b0545.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Hargadon_2.0e8ce9af.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Hargadon_3.c2d4d2f9.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Hargadon_4.32f084fe.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Lauritzen_0.ff0b0e74.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Lauritzen_1.f0251bbc.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Lauritzen_2.542dd85b.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Lauritzen_3.f43753d1.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Lauritzen_4.258bfcc7.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Murley-Pivirotto_3.2df52372.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Murley-Pivirotto_4.1b7389de.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Wendell-B_2.02f85678.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Wendell-B_3.2908d517.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Wendell-B_4.fa5a94e0.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Wendell-C_2.16f9ca52.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Wendell-C_3.a0526f19.png"},function(e,t,a){e.exports=a.p+"static/media/Whitman_Wendell-C_4.624b148c.png"},function(e,t,a){e.exports=a.p+"static/media/Excel_Sample.dd0b28f7.xlsx"},function(e,t,a){e.exports=a.p+"static/media/PDF_Sample.f462739a.pdf"},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),l=a.n(o),i=(a(19),a(4)),s=a(2);a(3);const c=e=>{let{availabilityInfo:t,occupancy:a,minSquareFootage:n}=e;const o=t.length>0?Math.max(...t.map(e=>e.floors.length)):0;if(0===t.length)return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",{className:"res-college-title"},"No results matched your parameters"),r.a.createElement("img",{id:"lockup",src:"/misc/PU_lockup.png",alt:"lockup"}));const l=(e,t,a)=>{return`../floorplans/hallfloor?resco=${e}&hall=${t}&floor=${a[0]}`};return r.a.createElement("div",{className:"table-container-results"},r.a.createElement("table",{className:"availability-table-all"},r.a.createElement("thead",null,r.a.createElement("tr",null,t.map((e,t)=>r.a.createElement("th",{key:t},e.hall)))),r.a.createElement("tbody",{className:"floorplan-table"},[...Array(o)].map((e,a)=>r.a.createElement("tr",{key:a},t.map((e,t)=>r.a.createElement("td",{key:t},e.floors[a]?r.a.createElement("a",{href:l("Whitman",e.hall,e.floors[a])},e.floors[a]):"")))))))};var m=()=>{const e=Object(s.m)(),t=new URLSearchParams(e.search),a=t.get("resco"),o=t.get("hall"),l=t.get("floor"),i=t.get("occupancy"),m=t.get("minSquareFootage"),d=t.get("resco")||"",u=t.get("hall")||"",p=t.get("floor")||"",h=t.get("occupancy")||"",g=t.get("minSquareFootage")||"",[f,v]=Object(n.useState)([]);return Object(n.useEffect)(()=>{document.cookie=`resco=${d}; path=/;`,document.cookie=`hall=${u}; path=/;`,document.cookie=`floor=${p}; path=/;`,document.cookie=`occupancy=${h}; path=/;`,document.cookie=`minSquareFootage=${g}; path=/;`},[d,u,p,h,g]),Object(n.useEffect)(()=>{let e="";a&&(e+=`resco=${encodeURIComponent(a)}&`),o&&(e+=`hall=${encodeURIComponent(o)}&`),l&&(e+=`floor=${encodeURIComponent(l)}&`),i&&(e+=`occupancy=${encodeURIComponent(i)}&`),m&&(e+=`minSquareFootage=${encodeURIComponent(m)}&`),e.endsWith("&")&&(e=e.slice(0,-1)),fetch(`/api/floorplans${e?`?${e}`:""}`).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>{v(e)}).catch(e=>console.error("Error fetching floor plans:",e))},[a,o,l,i,m]),r.a.createElement("div",null,r.a.createElement("h1",{className:"results-page-title"},"Showing results for all floor plans"),r.a.createElement("h1",{className:"res-college-title"},null===a?"All Residential Colleges":a),r.a.createElement(c,{availabilityInfo:f,occupancy:i||"",minSquareFootage:m||0}))};var d=e=>{let{username:t}=e;const[a,o]=Object(n.useState)(""),[l,i]=Object(n.useState)(""),[c,m]=Object(n.useState)(""),[d,u]=Object(n.useState)(""),[p,h]=Object(n.useState)(0),[g,f]=Object(n.useState)(!1),[v,E]=Object(n.useState)(""),y=Object(s.o)();return r.a.createElement("div",{className:"filter-container"},r.a.createElement("h1",{className:"filter-container-title"},"Welcome to TigerRooms, ",t,"!"),r.a.createElement("br",null),r.a.createElement("h3",{className:"filter-container-subtitle"},"Looking for an available room?"),r.a.createElement("div",{className:"dropdown-container"},r.a.createElement("div",{className:"dropdown-group"},r.a.createElement("label",{className:"filter-label",htmlFor:"residentialCollege"},"Residential College*"),r.a.createElement("select",{className:"filter-select",id:"residentialCollege",value:a,onChange:e=>o(e.target.value),style:{borderColor:g?"red":""}},r.a.createElement("option",{value:"",className:"placeholder-option"},"Select Residential College"),["Butler","Forbes","Mathey","Ncw","Rocky","Whitman","Yeh"].map((e,t)=>r.a.createElement("option",{key:t,value:e},e))),g&&r.a.createElement("p",{className:"error-message"},"Please select a Residential College.")),r.a.createElement("div",{className:"dropdown-group"},r.a.createElement("label",{className:"filter-label",htmlFor:"hall"},"Hall"),r.a.createElement("select",{className:"filter-select",id:"hall",value:l,onChange:e=>i(e.target.value),disabled:!a},r.a.createElement("option",{value:"",className:"placeholder-option"},"Select Hall"),a&&{Butler:["Yoseloff","Bogle","1976","1967","Bloomberg","Wilf","Scully"],Forbes:["Main","Annex"],Mathey:["Blair","Campbell","Edwards","Hamilton","Joline","Little"],Ncw:["Addy","Kanji","Kwanza-Jones","Jose-Feliciano"],Rocky:["Buyers","Campbell","Holder","Witherspoon"],Whitman:["1981","Fisher","Lauritzen","Murley-Pivirotto","Wendell-B","Wendell-C","Baker-E","Baker-S"],Yeh:["Fu","Grousbeck","Hariri","Mannion"]}[a].map((e,t)=>r.a.createElement("option",{key:t,value:e},e)))),r.a.createElement("div",{className:"dropdown-group"},r.a.createElement("label",{className:"filter-label",htmlFor:"floor"},"Floor"),r.a.createElement("select",{className:"filter-select",id:"floor",value:c,onChange:e=>m(e.target.value)},r.a.createElement("option",{value:"",className:"placeholder-option"},"Select Floor"),[0,1,2,3,4].map((e,t)=>r.a.createElement("option",{key:t,value:e},e)))),r.a.createElement("div",{className:"dropdown-group"},r.a.createElement("label",{className:"filter-label",htmlFor:"occupancy"},"Occupancy"),r.a.createElement("select",{className:"filter-select",id:"occupancy",value:d,onChange:e=>u(e.target.value)},r.a.createElement("option",{value:"",className:"placeholder-option"},"Select Occupancy"),[1,2,3,4].map((e,t)=>r.a.createElement("option",{key:t,value:e},e)))),r.a.createElement("div",{className:"dropdown-group"},r.a.createElement("label",{className:"filter-label",htmlFor:"squareFootage"},"Minimum Square Footage"),r.a.createElement("input",{id:"squareFootage",value:p,onChange:e=>{const t=e.target.value;!t.includes("-")&&!t.includes("e")&&!t.includes(".")&&!t.includes(" ")&&Number.isInteger(Number(t))&&Number(t)>=0?(h(t),E("")):E("Please enter a valid positive integer.")},className:"filter-select",placeholder:"Enter min sqft"}),v&&r.a.createElement("p",{className:"error-message"},v))),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{className:"filter-submit-button",onClick:()=>{if(!a)return void f(!0);f(!1),E("");let e="/floorplans?";e+=`resco=${encodeURIComponent(a)}`;let t=[];l&&t.push(`hall=${encodeURIComponent(l)}`),c&&t.push(`floor=${encodeURIComponent(c)}`),d&&t.push(`occupancy=${encodeURIComponent(d)}`),p&&t.push(`minSquareFootage=${encodeURIComponent(p)}`),t.length>0&&(e+="&"+t.join("&")),y(e)}},r.a.createElement("strong",null,"SUBMIT")),r.a.createElement("button",{className:"filter-reset-button",onClick:()=>{o(""),i(""),m(""),u(""),h(0),f(!1),E("")}},r.a.createElement("strong",null,"RESET"))))},u=a(5),p=a.n(u),h=a(6),g=a.n(h);const f=e=>{let{roomInfo:t,expandedRows:a,toggleExpandRow:n,handleSaveToggle:o,handleCreateReview:l,handleModifyReview:i,handleDisplayReview:s,hallName:c,adminStatus:m,username:d}=e;return r.a.createElement("table",{border:"1",cellPadding:"10",className:"room-availability-table"},r.a.createElement("thead",{className:"room-info-thead"},r.a.createElement("tr",null,r.a.createElement("th",{className:"availability-table-th"},"Availability Info"))),r.a.createElement("tbody",null,t.map((e,t)=>r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("tr",null,r.a.createElement("td",{className:"availability-table-td",onClick:()=>n(t)},r.a.createElement("div",{className:"availability"},r.a.createElement("div",{style:{width:"1.4vh",height:"1.4vh",backgroundColor:"T"===e.isAvailable?"green":"red",borderRadius:"T"===e.isAvailable?"50%":"0",marginRight:"1vw"}}),r.a.createElement("strong",null,e.name)," "),r.a.createElement("div",{style:{userSelect:"none"}},a.includes(t)?"\u2796":"\u2795"))),a.includes(t)&&r.a.createElement("tr",null,r.a.createElement("td",{className:"expanded-row-td",colSpan:"3"},r.a.createElement("div",{className:"expanded-content",style:{backgroundColor:"#f9f9f9"}},r.a.createElement("strong",null,e.size)," ",r.a.createElement("br",null),r.a.createElement("strong",null,e.occupancy)," ",r.a.createElement("br",null),r.a.createElement("strong",null,"Total Saves: ",e.total_saves),r.a.createElement("br",null),r.a.createElement("div",{className:"buttons-box"},m&&r.a.createElement("button",{onClick:()=>e.has_reviewed?i(e.room_id,d):l(e.room_id,d)},e.has_reviewed?"Modify Review":"Write Review"),m&&r.a.createElement("button",{onClick:()=>s(e.room_id,e.name)},"Display Reviews")),r.a.createElement("div",null,r.a.createElement("button",{onClick:()=>o(e.room_id,e.isSaved),style:{width:"20%",marginTop:"1vh",padding:"0.25vh",cursor:"pointer"}},e.isSaved?"Unsave":"Save")))))))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",{id:"availability-key-td"},r.a.createElement("strong",null,"Draw Availability Key"),r.a.createElement("div",{style:{display:"block",marginTop:"10px"}},r.a.createElement("div",{style:{marginBottom:"5px",display:"flex",alignItems:"center"}},r.a.createElement("div",{style:{width:"1vh",height:"1vh",backgroundColor:"green",borderRadius:"50%",marginRight:"0.5vh"}}),r.a.createElement("span",null,"Available")),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{style:{width:"1vh",height:"1vh",backgroundColor:"red",marginRight:"0.5vh"}}),r.a.createElement("span",null,"Unavailable")))))))};var v=e=>{let{username:t,adminStatus:o}=e;console.log("hallfloor route hit");const l=Object(s.m)(),i=new URLSearchParams(l.search),c=g()(p.a),[m,d]=Object(n.useState)([{name:"Room 101",isAvailable:"T",size:"200 sqft",occupancy:"Single",total_saves:10,isSaved:!1,has_reviewed:!1}]),[u,h]=Object(n.useState)([]),[v,E]=Object(n.useState)(!1),y=i.get("resco"),b=i.get("hall"),_=i.get("floor"),w=e=>{const t=document.cookie.split("; ");for(const a of t){const[t,n]=a.split("=");if(t===e)return n||""}return""},S=w("resco")||"",x=w("hall")||"",k=w("floor")||"",N=w("occupancy")||"",C=w("minSquareFootage")||"";let W;Object(n.useEffect)(()=>{fetch(`/api/floorplans/hallfloor?netid=${t}&hall=${b}&floor=${_}&occupancy=${N}&minSquareFootage=${C}`).then(e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()}).then(e=>{d(e)}).catch(e=>console.error("Error fetching room data:",e))},[_,t]);try{W=a(20)(`./${y}_${b}_${_}.png`),console.log(W)}catch($){return console.log("non-existent combination of resco, hall and floor"),r.a.createElement("div",{className:"floor-plan-error-container"},r.a.createElement("h1",{className:"floor-plan-error-message"},"No results matched your parameters"),r.a.createElement("h3",{className:"floor-plan-error-message"},"Click"," ",r.a.createElement("a",{href:"/",className:"back-to-floorplans"},"here")," ","to do another search"))}const j=(e,t,a,n,r)=>{fetch("/api/reviews/submit_review",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room_id:e,netid:t,rating:a,comments:n,review_date:r})}).then(e=>e.json()).then(t=>{t.success?(c.fire("Thank you!","Your review has been submitted successfully!","success"),d(t=>t.map(t=>t.room_id===e?{...t,has_reviewed:!0}:t))):t.error&&c.fire("Error.",t.error||"Something went wrong while submitting your review. Please try again.","error")}).catch(e=>{c.fire("Error.","Something went wrong while submitting your review. Please try again.","error"),console.error(e)})},O=(e,t)=>{fetch("/api/reviews/delete_review_of_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({netid:t,room_id:e})}).then(e=>e.json()).then(t=>{t.success?(c.fire("Review Removed!","Your review has been successfully removed.","success"),d(t=>t.map(t=>t.room_id===e?{...t,has_reviewed:!1}:t))):t.error&&c.fire("Error.",t.error||"Something went wrong while removing your review. Please try again.","error")}).catch(e=>{c.fire("Error.","Something went wrong while removing your review. Please try again.","error"),console.error(e)})},T=`/floorplans?resco=${S}&hall=${x}&floor=${k}&occupancy=${N}&minSquareFootage=${C}`;return r.a.createElement("div",{className:"floor-plan-flexbox"},r.a.createElement("div",{className:"floor-plan-map"},r.a.createElement("h1",{className:"floor-plan-title"},y+" College, "+b+" Hall, Floor "+_),r.a.createElement("img",{src:W,alt:"HallMap",className:"floor-plan-image"}),r.a.createElement("h3",{className:"back-link"},"Click"," ",r.a.createElement("a",{href:T,className:"back-to-floorplans"},"here")," ","to return to floor plans list")),r.a.createElement("div",{className:"available-rooms-table"},r.a.createElement(f,{roomInfo:m,expandedRows:u,toggleExpandRow:e=>{u.includes(e)?h(u.filter(t=>t!==e)):h([...u,e])},handleSaveToggle:(e,a)=>{v||(E(!0),fetch(`/api/${a?"unsave_room":"save_room"}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({netid:t,room_id:e})}).then(e=>e.json()).then(t=>{d(t=>t.map(t=>t.room_id===e?a&&0===t.total_saves?{...t,isSaved:!1}:{...t,isSaved:!a,total_saves:a?t.total_saves-1:t.total_saves+1}:t))}).catch(e=>console.error("Error toggling save status:",e)).finally(()=>{setTimeout(()=>{E(!1)},500)}))},handleCreateReview:(e,t)=>{c.fire({title:"Submit a review!",html:'<label for="rating">Rating (1 to 5 stars):</label>\n        <div id="rating" style="display: flex; justify-content: center; margin-bottom: 15px;">\n          <input type="radio" name="star" value="1" id="star1" class="star" style="display:none;">\n          <input type="radio" name="star" value="2" id="star2" class="star" style="display:none;">\n          <input type="radio" name="star" value="3" id="star3" class="star" style="display:none;">\n          <input type="radio" name="star" value="4" id="star4" class="star" style="display:none;">\n          <input type="radio" name="star" value="5" id="star5" class="star" style="display:none;">\n          <div class="rating" style="font-size: 2rem; cursor: pointer;">\n            <span class="star-icon" data-value="1">\u2605</span>\n            <span class="star-icon" data-value="2">\u2605</span>\n            <span class="star-icon" data-value="3">\u2605</span>\n            <span class="star-icon" data-value="4">\u2605</span>\n            <span class="star-icon" data-value="5">\u2605</span>\n          </div>\n        </div>\n        <textarea id="review-comments" class="swal2-input" placeholder="Write your review here..." rows="6" style="padding: 7.5px; height: 50px; width: 300px;"></textarea>',focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Submit Review",cancelButtonText:"Cancel",preConfirm:()=>{var a;const n=null===(a=document.querySelector('input[name="star"]:checked'))||void 0===a?void 0:a.value,r=document.getElementById("review-comments").value;if(!n||!r)return c.showValidationMessage("Please select a rating and write a comment"),!1;const o=new Date,l=`${new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",timeZone:"America/New_York"}).format(o)} ${new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,timeZone:"America/New_York"}).format(o)}`;return{room_id:e,netid:t,rating:parseInt(n),comments:r,review_date:l}}}).then(e=>{if(e.isConfirmed){const{room_id:t,netid:a,rating:n,comments:r,review_date:o}=e.value;j(t,a,n,r,o)}});const a=document.querySelectorAll(".star-icon");a.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.getAttribute("data-value");document.querySelector(`input[name="star"][value="${t}"]`).checked=!0,a.forEach(e=>e.style.color="gray");for(let n=0;n<t;n++)a[n].style.color="gold"})})},handleModifyReview:(e,t)=>{fetch("/api/reviews/get_review_of_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({netid:t,room_id:e})}).then(e=>e.json()).then(a=>{if(a.success&&a.review.comments){c.fire({title:"Modify your review.",html:`\n              <label for="rating">Rating (1 to 5 stars):</label>\n              <div id="rating" style="display: flex; justify-content: center; margin-bottom: 15px;">\n                <input type="radio" name="star" value="1" id="star1" class="star" style="display:none;">\n                <input type="radio" name="star" value="2" id="star2" class="star" style="display:none;">\n                <input type="radio" name="star" value="3" id="star3" class="star" style="display:none;">\n                <input type="radio" name="star" value="4" id="star4" class="star" style="display:none;">\n                <input type="radio" name="star" value="5" id="star5" class="star" style="display:none;">\n                <div class="rating" style="font-size: 2rem; cursor: pointer;">\n                  <span class="star-icon" data-value="1">\u2605</span>\n                  <span class="star-icon" data-value="2">\u2605</span>\n                  <span class="star-icon" data-value="3">\u2605</span>\n                  <span class="star-icon" data-value="4">\u2605</span>\n                  <span class="star-icon" data-value="5">\u2605</span>\n                </div>\n              </div>\n              <textarea id="review-comments" class="swal2-input" placeholder="Write your review here..." rows="6" style="padding: 7.5px; height: 50px; width: 300px;">${a.review.comments}</textarea>\n              <br />\n              <button id="remove-review" class="swal2-confirm swal2-styled" style="background-color: red; color: white; margin-top: 15px;">Remove Review</button>\n            `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Modify Review",cancelButtonText:"Cancel",preConfirm:()=>{var a;const n=null===(a=document.querySelector('input[name="star"]:checked'))||void 0===a?void 0:a.value,r=document.getElementById("review-comments").value;if(!n||!r)return c.showValidationMessage("Please select a rating and write a comment"),!1;const o=new Date,l=`${new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",timeZone:"America/New_York"}).format(o)} ${new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,timeZone:"America/New_York"}).format(o)}`;return{room_id:e,netid:t,rating:parseInt(n),comments:r,review_date:l}}}).then(e=>{if(e.isConfirmed){const{room_id:t,netid:a,rating:n,comments:r,review_date:o}=e.value;j(t,a,n,r,o)}});const n=document.querySelectorAll(".star-icon");n.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.getAttribute("data-value");document.querySelector(`input[name="star"][value="${t}"]`).checked=!0,n.forEach(e=>e.style.color="gray");for(let a=0;a<t;a++)n[a].style.color="gold"})});const r=a.review.rating;for(let e=0;e<r;e++)n[e].style.color="gold";document.querySelector(`input[name="star"][value="${r}"]`).checked=!0,document.getElementById("remove-review").addEventListener("click",()=>{c.fire({title:"Are you sure?",text:"Do you really want to remove your review?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, remove it!",cancelButtonText:"No, keep it"}).then(a=>{a.isConfirmed&&O(e,t)})})}else c.fire("Error","No review found for this room.","error")}).catch(e=>{c.fire("Error","Something went wrong while fetching your review.","error"),console.error(e)})},handleDisplayReview:(e,a)=>{fetch("/api/reviews/get_all_reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({netid:t,room_id:e})}).then(e=>e.json()).then(e=>{if(e.success)if(e.review&&e.review.length>0){const t=e.review.map(e=>{const{netid:t,rating:a,comments:n,review_date:r}=e;return`\n                  <div class="review" style="margin-bottom: 15px;">\n                    <p style="margin: 5px 0;"><strong>User:</strong> ${t}\n                    <span style="margin-left: 10px;"><strong>Rating:</strong> ${"\u2605".repeat(a)}${"\u2606".repeat(5-a)}</span></p>\n                    <p style="margin: 5px 0;"><strong>Date:</strong> ${r}</p>\n                    <p style="margin: 5px 0;"><strong>Review:</strong> ${n}</p>\n                    <hr style="margin-top: 10px;"/>\n                  </div>\n                `}).join("");c.fire({title:`Room ${a} Reviews`,html:`<div style="max-height: 500px; width: 600px; overflow-y: auto; padding: 20px; text-align: left;">${t}</div>`,width:"800px",showCancelButton:!0,cancelButtonText:"Close",confirmButtonText:"Okay",customClass:{popup:"larger-modal"}})}else c.fire({title:"No Reviews Found",text:`There are no reviews for Room ${a} yet.`,icon:"info",confirmButtonText:"Okay"});else c.fire("Error","Failed to fetch reviews.","error")}).catch(e=>{c.fire("Error","Something went wrong while fetching the reviews.","error"),console.error(e)})},hallName:b,adminStatus:!o,username:t})))};var E=()=>{const[e,t]=Object(n.useState)("Error, please try again");return Object(n.useEffect)(()=>{fetch("/logoutcas",{method:"GET",credentials:"include"}).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>{window.location.href=e.logout_url,t(e.message)}).catch(e=>{console.error("Error during logout:",e),alert("Something went wrong. Please try again.")})},["http://localhost:4000"]),r.a.createElement("div",null,r.a.createElement("h1",null,e))},y=a(10),b=a.n(y);var _=e=>{let{adminStatus:t}=e;const[o,l]=Object(n.useState)("No file selected"),[i,s]=Object(n.useState)(null),[c,m]=Object(n.useState)(!0),d=g()(p.a);if(!t)return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"90vh",backgroundColor:"#f4f4f4",padding:"0 5vw"}},r.a.createElement("h1",{style:{color:"red",fontSize:"8vw",fontWeight:"bold",textAlign:"center",marginBottom:"2vh",textTransform:"uppercase",letterSpacing:"2px",wordWrap:"break-word"}},"Unauthorized Access"),r.a.createElement("p",{style:{color:"darkred",fontSize:"4vw",fontWeight:"bold",textAlign:"center",marginTop:"1vh",wordWrap:"break-word"}},"You do not have permission to access this page. Please contact an admin."));return r.a.createElement("div",{className:"pdf-upload-page-cont"},r.a.createElement("h1",{id:"pdf-upload-text"},"Upload the latest PDF here! Our students will thank you!"),r.a.createElement("div",{id:"file-links",style:{marginTop:"2rem",textAlign:"center"}},r.a.createElement("h2",{style:{marginBottom:"1.5rem"}},"Please refer to the following PDF format, generated from the sample Excel file:"),r.a.createElement("ul",{style:{listStyleType:"none",padding:"0"}},r.a.createElement("li",{style:{marginBottom:"1rem"}},r.a.createElement("h3",{style:{margin:"0"}},r.a.createElement("a",{href:a(55),download:"Excel_Sample.xlsx",style:{textDecoration:"none",color:"#007bff"}},"Excel_Sample.xlsx"))),r.a.createElement("li",null,r.a.createElement("h3",{style:{margin:"0"}},r.a.createElement("a",{href:a(56),download:"PDF_Sample.pdf",style:{textDecoration:"none",color:"#007bff"}},"PDF_Sample.pdf"))))),r.a.createElement("div",{id:"upload-pdfs-cont"},r.a.createElement("form",{id:"pdf-form",onSubmit:async e=>{if(e.preventDefault(),!c)return;if(m(!1),d.fire({title:"Loading...",html:"Please wait a moment.",allowOutsideClick:!1}),d.showLoading(),!i)return d.hideLoading(),d.fire({icon:"error",title:"Oops...",text:"Please select a file to upload."}),void m(!0);const t=new FormData;t.append("request-type",1),t.append("rooms-pdf",i);try{const e=await fetch("/api/uploadpdf",{method:"POST",body:t}),n=await e.json();d.hideLoading(),e.ok?d.fire({title:"Thank you!",text:n.message,icon:"success"}):d.fire({icon:"error",title:"Oops...",text:n.error})}catch(a){d.fire({icon:"error",title:"Oops...",text:"An error occurred while uploading the file."})}m(!0)}},r.a.createElement("div",{id:"file-upload",onClick:()=>{document.getElementById("upload-pdf").click()}},r.a.createElement("label",{htmlFor:"upload-pdf"},r.a.createElement("img",{src:b.a,alt:"Upload"}),r.a.createElement("span",{className:"pdf-text"}," Drag & Drop "),r.a.createElement("span",{className:"pdf-text"}," or browse")),r.a.createElement("input",{type:"file",id:"upload-pdf",name:"rooms-pdf",accept:".pdf",onChange:e=>{const t=e.target.files[0];l(t?t.name:"No file selected"),s(t||null)},style:{display:"none"}}),r.a.createElement("small",null,"Supports: PDF"),r.a.createElement("div",{className:"uploaded-file-name"},r.a.createElement("span",null,"Uploaded file:"),"\xa0",r.a.createElement("span",null,o))),r.a.createElement("button",{type:"submit"},"Submit"))),r.a.createElement("div",null,r.a.createElement("button",{id:"reset-pdf-btn",onClick:async e=>{e.preventDefault(),d.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, reset it!"}).then(async e=>{if(e.isConfirmed){d.fire({title:"Loading...",html:"Please wait a moment.",allowOutsideClick:!1}),d.showLoading();const e=new FormData;e.append("request-type",0);try{const a=await fetch("/api/uploadpdf",{method:"POST",body:e}),n=await a.json();d.hideLoading(),a.ok?d.fire({title:"Reset Complete!",text:n.message,icon:"success"}):d.fire({icon:"error",title:"Oops...",text:n.error})}catch(t){d.fire({icon:"error",title:"Oops...",text:"An error occurred while resetting the file."})}}})}},"Reset Database")))};var w=()=>{const[e,t]=Object(n.useState)(""),a="http://localhost:4000";return Object(n.useEffect)(()=>{(async()=>{try{const n=await fetch(`${a}/api/getupdatedtime`,{method:"GET"});if(n.ok){const e=await n.json();t(e.timestamp)}else console.error("Error fetching date:",n.status)}catch(e){console.error("Fetch error:",e)}})()},[a]),r.a.createElement("footer",null,r.a.createElement("img",{id:"lockup",src:"/misc/PU_lockup.png",alt:"lockup"}),r.a.createElement("div",{id:"middle-text-cont"},r.a.createElement("ul",null,r.a.createElement("li",{id:"update-text"},"Last Updated:"," ",r.a.createElement("span",{id:"timestamp"},e||"Loading...")),r.a.createElement("li",null,"Website created by TigerRooms group (COS333 Fall '24 Project)"))),r.a.createElement("div",{className:"right-text-cont"},r.a.createElement("p",null,"TigerRooms"),r.a.createElement("p",null,"\xa9 2024 The Trustees of Princeton University"),r.a.createElement("p",null,r.a.createElement("a",{href:"https://www.princeton.edu/content/copyright-infringement"},"Copyright Infringement"," ")," ","|",r.a.createElement("a",{href:"https://www.princeton.edu/privacy-notice"}," ","Privacy Notice"," "))))};var S=e=>{let{adminStatus:t}=e;const a=Object(s.o)();return r.a.createElement("nav",null,r.a.createElement("div",{class:"logo-cont"},r.a.createElement("img",{id:"logo",src:"/misc/princeton-logo.png",alt:"Princeton"})),r.a.createElement("ul",{id:"nav-options"},r.a.createElement("li",null,r.a.createElement("ul",{id:"left-options"},r.a.createElement("li",null,r.a.createElement("a",{href:"/"},"Home")),r.a.createElement("li",null,r.a.createElement("a",{href:"/mygroup"},"MyGroup")),r.a.createElement("li",null,r.a.createElement("a",{href:"/floorplans"},"Floor Plans")),t&&r.a.createElement("li",null,r.a.createElement("a",{href:"/upload-pdfs"},"Upload PDFs")))),r.a.createElement("li",null,r.a.createElement("ul",{id:"right-options"},r.a.createElement("li",null,r.a.createElement("a",{href:"/logout"},"Log Out")),r.a.createElement("li",null,r.a.createElement("button",{id:"cart-btn",onClick:()=>{a("/cart")}},r.a.createElement("img",{id:"cart-svg",src:"/misc/cart.svg",alt:"View Cart"})))))))};var x=e=>{let{username:t}=e;const[a,o]=Object(n.useState)({}),[l,i]=Object(n.useState)([t]),[s,c]=Object(n.useState)({[t]:!1});Object(n.useEffect)(()=>{(async()=>{try{const a=await fetch(`/api/saved_rooms?user_id=${t}`);let n=[];a.ok?(n=(await a.json()).saved_rooms.sort((e,t)=>t.availability-e.availability),o({[t]:n})):(console.error(`Error fetching saved rooms for ${t}: ${a.statusText}`),o({[t]:[]}));const r=await fetch("/api/my_group"),l=await r.json();if(l.group_id&&l.members.length>1){i(l.members);const a=l.members.reduce((e,a)=>(e[a]=a!==t,e),{});c(a);const r={[t]:n};for(const n of l.members)if(n!==t)try{const t=await fetch(`/api/saved_rooms?user_id=${n}`);if(t.ok){const e=(await t.json()).saved_rooms.sort((e,t)=>t.availability-e.availability);r[n]=e}else console.error(`Error fetching saved rooms for ${n}: ${t.statusText}`)}catch(e){console.error(`Error fetching saved rooms for ${n}:`,e)}o(r)}}catch(e){console.error("Error fetching saved room or group data:",e)}})()},[t]);const m=()=>{window.confirm("Are you sure you want to clear all drawn rooms from the cart?")&&fetch("/api/clear_drawn_rooms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({netid:t})}).then(e=>{if(!e.ok)throw new Error(`Failed to clear drawn rooms: ${e.statusText}`);return e.json()}).then(()=>{o(e=>({...e,[t]:e[t].filter(e=>!0===e.availability)}))}).catch(e=>console.error("Error clearing drawn rooms:",e))};return r.a.createElement("div",{className:"cart-page"},r.a.createElement("h1",{className:"cart-title"},"Saved Rooms"),l.map(e=>r.a.createElement("div",{key:e,className:"saved-rooms-section"},r.a.createElement("h2",{className:"saved-rooms-title",onClick:()=>(e=>{c(t=>({...t,[e]:!t[e]}))})(e),style:{cursor:"pointer"}},e===t?"Your Saved Rooms":`Saved Rooms for ${e}`," ",s[e]?"\u2795":"\u2796"),!s[e]&&r.a.createElement(r.a.Fragment,null,a[e]&&a[e].length>0?r.a.createElement("table",{className:"saved-rooms-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Room"),r.a.createElement("th",null,"Total Saves"),r.a.createElement("th",null,"Availability"),e===t&&r.a.createElement("th",null))),r.a.createElement("tbody",null,a[e].map((a,n)=>r.a.createElement("tr",{key:n},r.a.createElement("td",null,`${a.hall} ${a.room_number}`),r.a.createElement("td",null,void 0!==a.total_saves?a.total_saves:"N/A"),r.a.createElement("td",null,r.a.createElement("div",{style:{width:"1vw",height:"1vw",borderRadius:"0.2vw",backgroundColor:a.availability?"green":"red",margin:"0 auto"}})),e===t&&r.a.createElement("td",null,r.a.createElement("button",{className:"trash-button",onClick:()=>((e,a)=>{window.confirm("Are you sure you want to remove this room from your cart?")&&fetch("/api/unsave_room",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({netid:t,room_number:e,hall:a})}).then(e=>{if(!e.ok)throw new Error(`Failed to unsave room: ${e.statusText}`);return e.json()}).then(()=>{o(n=>({...n,[t]:n[t].filter(t=>!(t.room_number===e&&t.hall===a))}))}).catch(e=>console.error("Error unsaving room:",e))})(a.room_number,a.hall)},"\ud83d\uddd1\ufe0f")))))):r.a.createElement("p",{className:"no-saved-rooms"},e===t?"You haven't saved any rooms yet.":`${e} has no saved rooms.`),e===t&&r.a.createElement("button",{className:"clear-drawn-rooms-button",onClick:m},"Clear All Unavailable (Drawn) Rooms From Cart")))))};var k=()=>r.a.createElement("div",{className:"invalid-route-error-container"},r.a.createElement("h1",{className:"invalid-route-error-message"},"ERROR 404: Page Not Found"),r.a.createElement("h3",{className:"invalid-route-error-message"},"Click"," ",r.a.createElement("a",{href:"/",className:"back-to-floorplans"},"here")," ","to do a room search"));var N=e=>{let{username:t}=e;const[a,o]=Object(n.useState)(null),[l,i]=Object(n.useState)([]),[s,c]=Object(n.useState)([]),[m,d]=Object(n.useState)([]),[u,p]=Object(n.useState)(0),[h,g]=Object(n.useState)(""),[f,v]=Object(n.useState)(!0),[E,y]=Object(n.useState)("");Object(n.useEffect)(()=>{fetch("/api/my_group").then(e=>e.json()).then(e=>{e.group_id?(o(e.group_id),i(e.members),fetch(`/api/group_pending_members?group_id=${e.group_id}`).then(e=>e.json()).then(e=>{e.pending_members&&c(e.pending_members)}).catch(e=>{console.error("Error fetching pending members:",e)})):o(null),v(!1)}).catch(e=>{console.error("Error fetching group data:",e),y("Failed to load group data. Please try again later."),v(!1)}),fetch("/api/my_pending_invites").then(e=>e.json()).then(e=>{e.invites&&d(e.invites)}).catch(e=>{console.error("Error fetching pending invites:",e)})},[]);const b=()=>{const e=m[u];v(!0),fetch("/api/decline_invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({group_id:e.group_id})}).then(e=>e.json()).then(e=>{e.message?d(e=>{const t=e.filter((e,t)=>t!==u);return u>=t.length&&p(0),t}):e.error&&y(e.error),v(!1)}).catch(e=>{console.error("Error declining invite:",e),y("Failed to decline invite. Please try again later."),v(!1)})},_=()=>{v(!0),fetch("/api/create_group",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({netid:t})}).then(e=>e.json()).then(e=>{e.group_id&&(o(e.group_id),i([t])),v(!1)}).catch(e=>{console.error("Error creating group:",e),y("Failed to create group. Please try again later."),v(!1)})};if(f)return r.a.createElement("p",null,"Loading...");if(!a&&m.length>0&&u<m.length){const e=m[u];return r.a.createElement("div",{className:"my-group"},r.a.createElement("h1",null,"My Group"),r.a.createElement("p",null,"You have been invited to join group"," ",r.a.createElement("strong",null,e.group_id),"."),r.a.createElement("p",null,r.a.createElement("strong",null,"Current Members:")),r.a.createElement("ul",null,e.members.map((e,t)=>r.a.createElement("li",{key:t},e))),r.a.createElement("button",{onClick:()=>(e=>{v(!0),fetch("/api/accept_invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({group_id:e})}).then(e=>e.json()).then(e=>{e.message?(o(e.group_id),d([]),fetch("/api/my_group").then(e=>e.json()).then(e=>{e.group_id?(o(e.group_id),i(e.members),fetch(`/api/group_pending_members?group_id=${e.group_id}`).then(e=>e.json()).then(e=>{e.pending_members&&c(e.pending_members),v(!1)}).catch(e=>{console.error("Error fetching pending members:",e),v(!1)})):v(!1)}).catch(e=>{console.error("Error fetching group data:",e),y("Failed to fetch updated group data."),v(!1)})):e.error&&(y(e.error),v(!1))}).catch(e=>{console.error("Error accepting invite:",e),y("Failed to accept invite. Please try again later."),v(!1)})})(e.group_id)},"Accept"),r.a.createElement("button",{onClick:b},"Decline"),E&&r.a.createElement("p",{className:"error"},E))}return a||0!==m.length?r.a.createElement("div",{className:"my-group"},r.a.createElement("h1",null,"My Group"),r.a.createElement("p",null,r.a.createElement("strong",null,"Group ID:")," ",a),r.a.createElement("p",null,r.a.createElement("strong",null,"Group Members:")),r.a.createElement("ul",null,l.map((e,t)=>r.a.createElement("li",{key:t},e))),r.a.createElement("p",null,r.a.createElement("strong",null,"Pending Members:")),r.a.createElement("ul",null,s.map((e,t)=>r.a.createElement("li",{key:t},e," ",r.a.createElement("button",{onClick:()=>(e=>{v(!0),fetch("/api/remove_invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({group_id:a,invitee_netid:e})}).then(e=>e.json()).then(t=>{t.message?(alert(t.message),c(t=>t.filter(t=>t!==e))):t.error&&y(t.error),v(!1)}).catch(e=>{console.error("Error removing invitation:",e),y("Failed to remove invitation. Please try again later."),v(!1)})})(e),className:"remove-invitation"},"Remove Invitation")))),r.a.createElement("div",{className:"add-member"},r.a.createElement("h2",null,"Add Member"),r.a.createElement("input",{type:"text",placeholder:"Enter NetID",value:h,onChange:e=>g(e.target.value)}),r.a.createElement("button",{onClick:()=>{h?/^[a-z]{2}\d{4}$/.test(h)?(y(""),v(!0),fetch("/api/add_member",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({invitee:h})}).then(e=>e.json()).then(e=>{e.message?(alert(e.message),c(e=>[...e,h]),g("")):e.error&&y(e.error),v(!1)}).catch(e=>{console.error("Error adding member:",e),y("Failed to send invitation. Please try again later."),v(!1)})):y("Invalid NetID format. It must be two lowercase letters followed by four numbers."):y("Please enter a NetID.")}},"Send Invitation")),r.a.createElement("button",{onClick:()=>{window.confirm("Are you sure you want to leave this group?")&&(v(!0),fetch("/api/leave_group",{method:"POST",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e.message?(alert(e.message),o(null),i([]),c([]),d([]),p(0)):e.error&&y(e.error),v(!1)}).catch(e=>{console.error("Error leaving group:",e),y("Failed to leave group. Please try again later."),v(!1)}))}},"Leave Group"),E&&r.a.createElement("p",{className:"error"},E)):r.a.createElement("div",{className:"my-group"},r.a.createElement("h1",null,"My Group"),r.a.createElement("p",null,"You are not currently in a group."),r.a.createElement("button",{onClick:_},"Create Group"),E&&r.a.createElement("p",{className:"error"},E))};var C=()=>{const[e,t]=r.a.useState(""),[a,n]=r.a.useState(!1);return r.a.useEffect(()=>{const e=async()=>{try{const r=await fetch("/api/user"),o=await r.json();o.username?(t(o.username),n(o.admin_status),console.log(`my username is ${o.username}`),console.log(`my admin status is ${o.admin_status}`)):(console.alert("NetID is not set, retrying..."),setTimeout(e,2e3))}catch(a){console.error("An error occurred: ",a)}};e()},[]),r.a.createElement(i.a,null,r.a.createElement(S,{adminStatus:a}),r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/floorplans",element:r.a.createElement(m,null)}),r.a.createElement(s.a,{path:"/",element:r.a.createElement(d,{username:e})}),r.a.createElement(s.a,{path:"/floorplans/hallfloor",element:r.a.createElement(v,{username:e,adminStatus:a})}),r.a.createElement(s.a,{path:"/logout",element:r.a.createElement(E,null)}),r.a.createElement(s.a,{path:"/upload-pdfs",element:r.a.createElement(_,{adminStatus:a})}),r.a.createElement(s.a,{path:"/cart",element:r.a.createElement(x,{username:e})}),r.a.createElement(s.a,{path:"*",element:r.a.createElement(k,null)}),r.a.createElement(s.a,{path:"/mygroup",element:r.a.createElement(N,{username:e})})),r.a.createElement(w,null))};var W=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,58)).then(t=>{let{getCLS:a,getFID:n,getFCP:r,getLCP:o,getTTFB:l}=t;a(e),n(e),r(e),o(e),l(e)})};l.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null))),W()}],[[11,1,2]]]);
//# sourceMappingURL=main.24bb64ee.chunk.js.map